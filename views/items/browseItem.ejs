<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browse Items | Barter Trading System</title>
  <!-- Materialize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <!-- Navigation -->
  <%- include('../partials/navbar') %>

    <main class="container">
      <div class="col s12 m10 offset-m1 l8 offset-l2">
        <div class="card white z-depth-2" style="padding: 30px; border-radius: 12px;">
          <h5 class="center-align" style="margin-bottom: 30px;">Browse Items</h5>

          <!-- Search form -->
          <form method="GET" action="/items">
            <div style="margin-bottom:20px;">
              <label for="search" style="font-weight:500;">Search items</label>
              <!-- <input id="search" type="text" name="search" value="<%= query.search || '' %>"> -->
              <textarea id="search" name="search"
                style="width:100%;margin-top:6px;padding:12px 12px;border:1px solid #e5e7eb;border-radius:6px;font-size:1rem;resize:none;"
                placeholder="Enter title or description"></textarea>
            </div>
            <div class="right-align">
              <button class="btn waves-effect waves-light" type="submit">
                Search
              </button>
            </div>
          </form>

          <!-- Items list -->
          <div class="row" style="margin-top: 30px;">
            <% if (items.length> 0) { %>
              <% items.forEach(item=> { %>
                <div class="col s6 m4 l3">
                  <div class="card z-depth-1" style="height: 100%;">
                    <div class="card-image"
                      style="height: 200px; display: flex; align-items: center; justify-content: center; background: #f5f5f5;">
                      <img src="/uploads/items/<%= item.images[0] %>" alt="<%= item.title %>"
                        style="max-height: 100%; max-width: 100%; object-fit: contain;">
                    </div>
                    <div class="card-content" style="padding: 15px;">
                      <span class="card-title" style="font-size: 1.1rem; line-height: 1.4; margin-bottom: 10px;">
                        <%= item.title %>
                      </span>
                      <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">
                        <%= item.description.length> 100 ? item.description.substring(0, 100) + '...' : item.description
                          %>
                      </p>
                    </div>
                    <div class="card-action" style="padding: 10px 15px;">
                      <small style="color: #666;">Category: <%= item.category %></small>
                    </div>
                  </div>
                </div>
                <% }) %>
                  <% } else { %>
                    <p class="center-align grey-text">No items found.</p>
                    <% } %>
          </div>

        </div>
      </div>
    </main>

    <!-- Footer -->
    <%- include('../partials/footer') %>

      <!-- Materialize JS -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
      <!-- Custom JS -->
      <script src="/js/main.js"></script>
</body>

</html>